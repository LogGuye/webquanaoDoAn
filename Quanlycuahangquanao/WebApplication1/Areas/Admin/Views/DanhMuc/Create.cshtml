@model WebApplication1.ViewModels.DanhMucCreateEditViewModel
@{
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
    ViewBag.Title = "Thêm danh mục";
}

<div class="container-fluid py-4">
    <h2 class="mb-4">Thêm danh mục mới</h2>

    @using (Html.BeginForm("Create", "DanhMuc", new { area = "Admin" }, FormMethod.Post, new { @class = "needs-validation", novalidate = "novalidate" }))
    {
        @Html.AntiForgeryToken()
        <div class="card shadow-sm">
            <div class="card-body">

                @* Hiển thị toàn bộ lỗi *@
                @Html.ValidationSummary(true, "", new { @class = "alert alert-danger" })

                <div class="mb-3">
                    @Html.LabelFor(m => m.TenDanhMuc, new { @class = "form-label" })
                    @Html.TextBoxFor(m => m.TenDanhMuc, new
                    {
                        @class = "form-control",
                        placeholder = "Nhập tên danh mục"
                    })
                    @Html.ValidationMessageFor(m => m.TenDanhMuc, "", new { @class = "text-danger" })
                </div>

                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-save2 me-1"></i> Lưu
                </button>
                <a href="@Url.Action("Index","DanhMuc", new { area="Admin" })" class="btn btn-outline-secondary ms-2">
                    <i class="bi bi-arrow-left-circle me-1"></i> Hủy
                </a>

            </div>
        </div>
    }
</div>

@section Scripts {
    <script>
        // Bootstrap 5 custom validation
        (function () {
            'use strict';
            var forms = document.querySelectorAll('.needs-validation');
            Array.prototype.slice.call(forms).forEach(function (form) {
                form.addEventListener('submit', function (e) {
                    if (!form.checkValidity()) {
                        e.preventDefault();
                        e.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();
    </script>
}
